{"version":3,"sources":["..\\..\\..\\..\\..\\assets\\Script\\Manager/assets\\Script\\Manager\\Notification.js"],"names":["Notification","cc","Class","extends","Component","properties","text","Label","alpha","Node","timeDisplay","fadeDistance","statics","instance","onLoad","queue","start","cachePosY","node","y","scrolling","display","string","opacity","fadeIn","spawn","moveTo","v2","fadeOut","runAction","sequence","delayTime","callFunc","add","push","update","dt","length","splice"],"mappings":";;;;;;AAAA,IAAIA,eAAeC,GAAGC,KAAH,CAAS;AACxBC,aAASF,GAAGG,SADY;;AAGxBC,gBAAY;AACRC,cAAML,GAAGM,KADD;AAERC,eAAOP,GAAGQ,IAFF;AAGRC,qBAAa,CAHL;AAIRC,sBAAc;AAJN,KAHY;;AAUxBC,aAAS;AACLC,kBAAU;AADL,KAVe;;AAcxBC,UAdwB,oBAcf;AACL,aAAKC,KAAL,GAAa,EAAb;AACAf,qBAAaa,QAAb,GAAwB,IAAxB;AACH,KAjBuB;AAmBxBG,SAnBwB,mBAmBhB;AACJ,aAAKC,SAAL,GAAiB,KAAKX,IAAL,CAAUY,IAAV,CAAeC,CAAhC;AACA,aAAKC,SAAL,GAAiB,KAAjB;AACH,KAtBuB;AAwBxBC,WAxBwB,mBAwBhBf,IAxBgB,EAwBV;AAAA;;AACV,aAAKA,IAAL,CAAUgB,MAAV,GAAmBhB,IAAnB;AACA,aAAKA,IAAL,CAAUY,IAAV,CAAeK,OAAf,GAAyB,CAAzB;AACA,aAAKjB,IAAL,CAAUY,IAAV,CAAeC,CAAf,GAAmB,KAAKF,SAAL,GAAiB,KAAKN,YAAzC;AACA,aAAKS,SAAL,GAAiB,IAAjB;AACA,YAAII,SAASvB,GAAGwB,KAAH,CACTxB,GAAGyB,MAAH,CAAU,GAAV,EAAezB,GAAG0B,EAAH,CAAM,CAAN,EAAS,KAAKV,SAAd,CAAf,CADS,EAEThB,GAAGuB,MAAH,CAAU,GAAV,CAFS,CAAb;;AAIA,YAAII,UAAU3B,GAAGwB,KAAH,CAASxB,GAAGyB,MAAH,CAAU,GAAV,EACnBzB,GAAG0B,EAAH,CAAM,CAAN,EAAS,KAAKV,SAAL,GAAiB,KAAKN,YAA/B,CADmB,CAAT,EAEVV,GAAG2B,OAAH,CAAW,GAAX,CAFU,CAAd;;AAIA,aAAKtB,IAAL,CAAUY,IAAV,CAAeW,SAAf,CAAyB5B,GAAG6B,QAAH,CAAYN,MAAZ,EACAvB,GAAG8B,SAAH,CAAa,GAAb,CADA,EAEAH,OAFA,EAGA3B,GAAG8B,SAAH,CAAa,GAAb,CAHA,EAIA9B,GAAG+B,QAAH,CAAY;AAAA,mBAAM,MAAKZ,SAAL,GAAiB,KAAvB;AAAA,SAAZ,CAJA,CAAzB;AAKH,KA1CuB;AA4CxBa,OA5CwB,eA4CpB3B,IA5CoB,EA4Cd;AACN,aAAKS,KAAL,CAAWmB,IAAX,CAAgB5B,IAAhB;AACH,KA9CuB;AAgDxB6B,UAhDwB,kBAgDjBC,EAhDiB,EAgDb;AACP,YAAI,KAAKrB,KAAL,CAAWsB,MAAX,GAAoB,CAApB,IAAyB,CAAC,KAAKjB,SAAnC,EAA8C;AAC1C,iBAAKC,OAAL,CAAa,KAAKN,KAAL,CAAW,CAAX,CAAb;AACA,iBAAKA,KAAL,CAAWuB,MAAX,CAAkB,CAAlB,EAAqB,CAArB;AACH;AACJ;AArDuB,CAAT,CAAnB","file":"Notification.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\Script\\Manager","sourcesContent":["var Notification = cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        text: cc.Label,\r\n        alpha: cc.Node,\r\n        timeDisplay: 2,\r\n        fadeDistance: 50,\r\n    },\r\n\r\n    statics: {\r\n        instance: null\r\n    },\r\n\r\n    onLoad() {\r\n        this.queue = [];\r\n        Notification.instance = this;\r\n    },\r\n\r\n    start() {\r\n        this.cachePosY = this.text.node.y;\r\n        this.scrolling = false;\r\n    },\r\n\r\n    display(text) {\r\n        this.text.string = text;\r\n        this.text.node.opacity = 0;\r\n        this.text.node.y = this.cachePosY + this.fadeDistance;\r\n        this.scrolling = true;\r\n        let fadeIn = cc.spawn(\r\n            cc.moveTo(0.2, cc.v2(0, this.cachePosY)),\r\n            cc.fadeIn(0.2));\r\n\r\n        let fadeOut = cc.spawn(cc.moveTo(0.2,\r\n            cc.v2(0, this.cachePosY - this.fadeDistance)),\r\n            cc.fadeOut(0.2));\r\n\r\n        this.text.node.runAction(cc.sequence(fadeIn,\r\n                                 cc.delayTime(1.6),\r\n                                 fadeOut,\r\n                                 cc.delayTime(0.1),\r\n                                 cc.callFunc(() => this.scrolling = false)));\r\n    },\r\n\r\n    add(text) {\r\n        this.queue.push(text);\r\n    },\r\n\r\n    update(dt) {\r\n        if (this.queue.length > 0 && !this.scrolling) {\r\n            this.display(this.queue[0]);\r\n            this.queue.splice(0, 1);\r\n        }\r\n    }\r\n});\r\n"]}