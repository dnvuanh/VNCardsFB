{"version":3,"sources":["Notification.js"],"names":["Notification","cc","Class","extends","Component","properties","text","Label","alpha","Node","timeDisplay","fadeDistance","statics","instance","onLoad","queue","start","cachePosY","node","y","scrolling","display","string","opacity","fadeIn","spawn","moveTo","v2","fadeOut","runAction","sequence","delayTime","callFunc","add","push","update","dt","length","splice"],"mappings":";;;;;;AAAA,IAAIA,eAAeC,GAAGC,KAAH,CAAS;AACxBC,aAASF,GAAGG,SADY;;AAGxBC,gBAAY;AACRC,cAAML,GAAGM,KADD;AAERC,eAAOP,GAAGQ,IAFF;AAGRC,qBAAa,CAHL;AAIRC,sBAAc;AAJN,KAHY;;AAUxBC,aAAS;AACLC,kBAAU;AADL,KAVe;;AAcxBC,UAdwB,oBAcf;AACL,aAAKC,KAAL,GAAa,EAAb;AACAf,qBAAaa,QAAb,GAAwB,IAAxB;AACH,KAjBuB;AAmBxBG,SAnBwB,mBAmBhB;AACJ,aAAKC,SAAL,GAAiB,KAAKX,IAAL,CAAUY,IAAV,CAAeC,CAAhC;AACA,aAAKC,SAAL,GAAiB,KAAjB;AACH,KAtBuB;AAwBxBC,WAxBwB,mBAwBhBf,IAxBgB,EAwBV;AAAA;;AACV,aAAKA,IAAL,CAAUgB,MAAV,GAAmBhB,IAAnB;AACA,aAAKA,IAAL,CAAUY,IAAV,CAAeK,OAAf,GAAyB,CAAzB;AACA,aAAKjB,IAAL,CAAUY,IAAV,CAAeC,CAAf,GAAmB,KAAKF,SAAL,GAAiB,KAAKN,YAAzC;AACA,aAAKS,SAAL,GAAiB,IAAjB;AACA,YAAII,SAASvB,GAAGwB,KAAH,CACTxB,GAAGyB,MAAH,CAAU,GAAV,EAAezB,GAAG0B,EAAH,CAAM,CAAN,EAAS,KAAKV,SAAd,CAAf,CADS,EAEThB,GAAGuB,MAAH,CAAU,GAAV,CAFS,CAAb;;AAIA,YAAII,UAAU3B,GAAGwB,KAAH,CAASxB,GAAGyB,MAAH,CAAU,GAAV,EACnBzB,GAAG0B,EAAH,CAAM,CAAN,EAAS,KAAKV,SAAL,GAAiB,KAAKN,YAA/B,CADmB,CAAT,EAEVV,GAAG2B,OAAH,CAAW,GAAX,CAFU,CAAd;;AAIA,aAAKtB,IAAL,CAAUY,IAAV,CAAeW,SAAf,CAAyB5B,GAAG6B,QAAH,CAAYN,MAAZ,EACAvB,GAAG8B,SAAH,CAAa,GAAb,CADA,EAEAH,OAFA,EAGA3B,GAAG8B,SAAH,CAAa,GAAb,CAHA,EAIA9B,GAAG+B,QAAH,CAAY;AAAA,mBAAM,MAAKZ,SAAL,GAAiB,KAAvB;AAAA,SAAZ,CAJA,CAAzB;AAKH,KA1CuB;AA4CxBa,OA5CwB,eA4CpB3B,IA5CoB,EA4Cd;AACN,aAAKS,KAAL,CAAWmB,IAAX,CAAgB5B,IAAhB;AACH,KA9CuB;AAgDxB6B,UAhDwB,kBAgDjBC,EAhDiB,EAgDb;AACP,YAAI,KAAKrB,KAAL,CAAWsB,MAAX,GAAoB,CAApB,IAAyB,CAAC,KAAKjB,SAAnC,EAA8C;AAC1C,iBAAKC,OAAL,CAAa,KAAKN,KAAL,CAAW,CAAX,CAAb;AACA,iBAAKA,KAAL,CAAWuB,MAAX,CAAkB,CAAlB,EAAqB,CAArB;AACH;AACJ;AArDuB,CAAT,CAAnB","file":"Notification.js","sourceRoot":"../../../../../assets/Script/Manager","sourcesContent":["var Notification = cc.Class({\n    extends: cc.Component,\n\n    properties: {\n        text: cc.Label,\n        alpha: cc.Node,\n        timeDisplay: 2,\n        fadeDistance: 50,\n    },\n\n    statics: {\n        instance: null\n    },\n\n    onLoad() {\n        this.queue = [];\n        Notification.instance = this;\n    },\n\n    start() {\n        this.cachePosY = this.text.node.y;\n        this.scrolling = false;\n    },\n\n    display(text) {\n        this.text.string = text;\n        this.text.node.opacity = 0;\n        this.text.node.y = this.cachePosY + this.fadeDistance;\n        this.scrolling = true;\n        let fadeIn = cc.spawn(\n            cc.moveTo(0.2, cc.v2(0, this.cachePosY)),\n            cc.fadeIn(0.2));\n\n        let fadeOut = cc.spawn(cc.moveTo(0.2,\n            cc.v2(0, this.cachePosY - this.fadeDistance)),\n            cc.fadeOut(0.2));\n\n        this.text.node.runAction(cc.sequence(fadeIn,\n                                 cc.delayTime(1.6),\n                                 fadeOut,\n                                 cc.delayTime(0.1),\n                                 cc.callFunc(() => this.scrolling = false)));\n    },\n\n    add(text) {\n        this.queue.push(text);\n    },\n\n    update(dt) {\n        if (this.queue.length > 0 && !this.scrolling) {\n            this.display(this.queue[0]);\n            this.queue.splice(0, 1);\n        }\n    }\n});\n"]}