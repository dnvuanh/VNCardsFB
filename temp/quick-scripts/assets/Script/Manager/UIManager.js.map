{"version":3,"sources":["UIManager.js"],"names":["Loading","require","UIManager","cc","Class","extends","Component","properties","loadingscreen","MenuGame","statics","instance","onLoad","MenuStack","CurrentMenu","start","GameMgr","onInit","showLoading","display","show","hide","showMenu","menuName","closeCurrent","menu","node","getChildByName","active","push","length","lastMenu","splice","closeCurrentMenu","nextMenu","closeAllMenu","childs","children","forEach","element","initOnlineList","onlineList","Init","addPlayer","player","removePlayer","console","log","playerEnterSeat","playerInfo","seat","playerLeaveSeat","setHost","playerId","enableStartButton","enable","onCardsReceived","cards","playAnim","getSelectedCards","onTurnChange","startTime","timeout","checkThrowable","onThrowSuccess","onGameWaiting","onGameOver","displayResult","scores","playerWinId","playersCards","onPlayerReady","isReady","onPlayerRegisterLeave","isLeave","onGameStateReady","timeStamp","onGameStart","refreshSeats","Seats","getPlayerSeat"],"mappings":"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","file":"UIManager.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\Script\\Manager","sourcesContent":["var Loading = require(\"Loading\");\r\nvar UIManager = cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        loadingscreen: Loading,\r\n        MenuGame: require(\"MenuGame\"),\r\n    },\r\n    \r\n    statics:\r\n    {\r\n        instance: null,\r\n    },\r\n    \r\n    onLoad()\r\n    {\r\n        UIManager.instance = this;\r\n        this.MenuStack = [];\r\n        this.CurrentMenu = null;\r\n    },\r\n\r\n    start()\r\n    {\r\n        GameMgr.instance.onInit();\r\n    },\r\n\r\n    showLoading(display)\r\n    {\r\n        if (display)\r\n            this.loadingscreen.show();\r\n        else\r\n            this.loadingscreen.hide();\r\n    },\r\n    \r\n    showMenu(menuName, closeCurrent=true)\r\n    {\r\n        let menu = this.node.getChildByName(menuName);\r\n        if (menu != null)\r\n        {\r\n            menu.active = true;\r\n            this.MenuStack.push(menuName);\r\n            this.CurrentMenu = menuName;\r\n        }\r\n        \r\n        if (this.MenuStack.length > 1)\r\n        {\r\n            let lastMenu = this.node.getChildByName(this.MenuStack[this.MenuStack.length - 2]);\r\n                lastMenu.active = false;\r\n\r\n            if (closeCurrent)\r\n                this.MenuStack.splice(this.MenuStack.length - 2,1);\r\n        }\r\n        return menu;\r\n    },\r\n    \r\n    closeCurrentMenu()\r\n    {\r\n        if (this.MenuStack.length > 1)\r\n        {\r\n            let nextMenu = this.node.getChildByName(this.MenuStack[this.MenuStack.length-2]);\r\n                nextMenu.active = true;\r\n        }\r\n        \r\n        let menu = this.node.getChildByName(this.CurrentMenu);\r\n            menu.active = false;\r\n        \r\n        this.MenuStack.splice(this.MenuStack.length-1, 1);\r\n        this.CurrentMenu = this.MenuStack[this.MenuStack.length];\r\n    },\r\n\r\n    closeAllMenu()\r\n    {\r\n        let childs = this.node.children;\r\n            childs.forEach(element => {\r\n                element.active = false;\r\n            });\r\n    },\r\n\r\n    initOnlineList()\r\n    {\r\n        this.onlineList.Init();\r\n    },\r\n\r\n    addPlayer(player)\r\n    {\r\n        this.MenuGame.addPlayer(player);\r\n    },\r\n\r\n    removePlayer(player)\r\n    {\r\n        console.log(player);\r\n        this.MenuGame.removePlayer(player);\r\n    },\r\n    \r\n    playerEnterSeat(playerInfo, seat)\r\n    {\r\n        this.MenuGame.playerEnterSeat(playerInfo, seat);\r\n    },\r\n\r\n    playerLeaveSeat(seat)\r\n    {\r\n        this.MenuGame.playerLeaveSeat(seat);\r\n    },\r\n\r\n    setHost(playerId)\r\n    {\r\n        this.MenuGame.setHost(playerId);\r\n    },\r\n\r\n    enableStartButton(enable) \r\n    {\r\n        this.MenuGame.enableStartButton(enable);\r\n    },\r\n\r\n    onCardsReceived(cards, playAnim)\r\n    {\r\n        this.MenuGame.onCardsReceived(cards, playAnim);\r\n    },\r\n\r\n    getSelectedCards()\r\n    {\r\n        return this.MenuGame.getSelectedCards();\r\n    },\r\n\r\n    onTurnChange(playerId, startTime, timeout)\r\n    {\r\n        this.MenuGame.onTurnChange(playerId, startTime, timeout);\r\n    },\r\n\r\n    checkThrowable()\r\n    {\r\n        this.MenuGame.checkThrowable();\r\n    },\r\n\r\n    onThrowSuccess(playerId, cards)\r\n    {\r\n        this.MenuGame.onThrowSuccess(playerId, cards);\r\n    },\r\n\r\n    onGameWaiting()\r\n    {\r\n        this.MenuGame.onGameWaiting();\r\n    },\r\n\r\n    onGameOver()\r\n    {\r\n        this.MenuGame.onGameOver();\r\n    },\r\n\r\n    displayResult(scores, playerWinId, playersCards)\r\n    {\r\n        this.MenuGame.displayResult(scores, playerWinId, playersCards);\r\n    },\r\n\r\n    onPlayerReady(playerId, isReady)\r\n    {\r\n        this.MenuGame.onPlayerReady(playerId, isReady);\r\n    },\r\n\r\n    onPlayerRegisterLeave(isLeave)\r\n    {\r\n        this.MenuGame.onPlayerRegisterLeave(isLeave);\r\n    },\r\n\r\n    onGameStateReady(timeStamp)\r\n    {\r\n        this.MenuGame.onGameStateReady(timeStamp);\r\n    },\r\n\r\n    onGameStart()\r\n    {\r\n        this.MenuGame.onGameStart();\r\n    },\r\n\r\n    refreshSeats(Seats)\r\n    {\r\n        this.MenuGame.refreshSeats(Seats);\r\n    },\r\n\r\n    getPlayerSeat(playerId)\r\n    {\r\n        return this.MenuGame.getPlayerSeat(playerId);\r\n    }\r\n});\r\n"]}