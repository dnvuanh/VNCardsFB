{"version":3,"sources":["DealCards.js"],"names":["cc","Class","extends","Component","properties","cardsOfEach","flyingTime","delayTime","destination","Node","startAnim","callbackEveryTurn","deliveryCount","startFlying","i","node","children","length","cardOrder","position","DelayTime","moveTo","MoveTo","finish","callFunc","onCardDelivery","sequence","Sequence","SoundMgr","instance","play","active","runAction","card","setPosition"],"mappings":";;;;;;AAAAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,qBAAa,EADL;AAERC,oBAAY,GAFJ;AAGRC,mBAAW,GAHH;AAIRC,qBAAa,CAACR,GAAGS,IAAJ;AAJL,KAHP;;AAULC,aAVK,qBAUKC,iBAVL,EAWL;AACI,aAAKC,aAAL,GAAqB,CAArB;AACA,aAAKC,WAAL,GAAmB,IAAnB;AACA,aAAKF,iBAAL,GAAyBA,iBAAzB;AACA,aAAK,IAAIG,IAAE,CAAX,EAAcA,IAAE,KAAKC,IAAL,CAAUC,QAAV,CAAmBC,MAAnC,EAA2CH,GAA3C,EACA;AACI,gBAAII,YAAaJ,IAAE,KAAKN,WAAL,CAAiBS,MAApC;AACA,gBAAIE,WAAW,KAAKX,WAAL,CAAkBM,IAAI,KAAKN,WAAL,CAAiBS,MAAvC,EAAgDE,QAA/D;AACA,gBAAIZ,YAAY,IAAIP,GAAGoB,SAAP,CAAiBF,YAAY,KAAKX,SAAlC,CAAhB;AACA,gBAAIc,SAAS,IAAIrB,GAAGsB,MAAP,CAAc,KAAKhB,UAAnB,EAA+Ba,QAA/B,CAAb;AACA,gBAAII,SAAS,IAAIvB,GAAGwB,QAAP,CAAgB,KAAKC,cAArB,EAAqC,IAArC,EAA2C,KAAKV,IAAL,CAAUC,QAAV,CAAmBF,CAAnB,CAA3C,CAAb;AACA,gBAAIY,WAAW,IAAI1B,GAAG2B,QAAP,CAAgBpB,SAAhB,EAA2BP,GAAGwB,QAAH,CAAY;AAAA,uBAAMI,SAASC,QAAT,CAAkBC,IAAlB,CAAuB,MAAvB,EAA+B,KAA/B,EAAsC,GAAtC,CAAN;AAAA,aAAZ,CAA3B,EAA0FT,MAA1F,EAAkGE,MAAlG,CAAf;AACA,iBAAKR,IAAL,CAAUC,QAAV,CAAmBF,CAAnB,EAAsBiB,MAAtB,GAA+B,IAA/B;AACA,iBAAKhB,IAAL,CAAUC,QAAV,CAAmBF,CAAnB,EAAsBkB,SAAtB,CAAgCN,QAAhC;AACH;AACJ,KA1BI;AA4BLD,kBA5BK,0BA4BUQ,IA5BV,EA6BL;AACI,aAAKrB,aAAL,IAAsB,CAAtB;AACAqB,aAAKC,WAAL,CAAiB,CAAjB,EAAmB,CAAnB;AACAD,aAAKF,MAAL,GAAc,KAAd;AACA,YAAI,KAAKnB,aAAL,GAAqB,KAAKJ,WAAL,CAAiBS,MAAtC,IAAgD,CAApD,EACA;AACI,iBAAKN,iBAAL;AACH;AACJ;AArCI,CAAT","file":"DealCards.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\Script\\UI","sourcesContent":["cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        cardsOfEach: 13,\r\n        flyingTime: 0.4,\r\n        delayTime: 0.1,\r\n        destination: [cc.Node]\r\n    },\r\n\r\n    startAnim(callbackEveryTurn)\r\n    {\r\n        this.deliveryCount = 0;\r\n        this.startFlying = true;\r\n        this.callbackEveryTurn = callbackEveryTurn;\r\n        for (var i=0; i<this.node.children.length; i++)\r\n        {\r\n            let cardOrder = (i/this.destination.length);\r\n            let position = this.destination[(i % this.destination.length)].position;\r\n            let delayTime = new cc.DelayTime(cardOrder * this.delayTime);\r\n            let moveTo = new cc.MoveTo(this.flyingTime, position);\r\n            let finish = new cc.callFunc(this.onCardDelivery, this, this.node.children[i]);\r\n            let sequence = new cc.Sequence(delayTime, cc.callFunc(() => SoundMgr.instance.play(\"deal\", false, 0.6)), moveTo, finish);\r\n            this.node.children[i].active = true;\r\n            this.node.children[i].runAction(sequence);\r\n        }\r\n    },\r\n\r\n    onCardDelivery(card)\r\n    {\r\n        this.deliveryCount += 1;\r\n        card.setPosition(0,0);\r\n        card.active = false;\r\n        if (this.deliveryCount % this.destination.length == 0)\r\n        {\r\n            this.callbackEveryTurn();\r\n        }\r\n    }\r\n});\r\n"]}