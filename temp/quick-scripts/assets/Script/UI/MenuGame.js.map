{"version":3,"sources":["MenuGame.js"],"names":["MenuScene","require","ObjectPool","cc","Class","extends","properties","onlineList","chatBox","SeatMgr","ButtonLeave","Node","ButtonStart","InGameButtons","myCardNode","rightPanelNode","showRightButton","Button","showRightLabel","Label","throwButton","start","active","node","seatOccupied","addPlayer","player","removePlayer","requestSeat","sender","seat","console","log","GSMgr","instance","parseInt","requestLeaveSeat","leaveSeat","GameMgr","getMySeat","playerEnterSeat","playerInfo","onPlayerEnter","IsMyId","id","playerLeaveSeat","enableStartButton","onPlayerLeave","setHost","playerId","enable","chatBoxClick","onlineClick","onStartGameClick","startGame","onCardsReceived","cards","i","length","card","getCard","setParent","onShowRightMenuClick","position","getPosition","string","enableThrowButton","throwButtonClick","throwCards","getSetCards"],"mappings":"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","file":"MenuGame.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\Script\\UI","sourcesContent":["\r\nvar MenuScene = require(\"MenuScene\");\r\nvar ObjectPool = require(\"ObjectPool\");\r\n\r\ncc.Class({\r\n    extends: MenuScene,\r\n\r\n    properties: {\r\n        onlineList: require(\"OnlineList\"),\r\n        chatBox: require(\"ChatBox\"),\r\n        SeatMgr: require(\"SeatMgr\"),\r\n        ButtonLeave: cc.Node,\r\n        ButtonStart: cc.Node,\r\n        InGameButtons: cc.Node,\r\n        myCardNode: cc.Node,\r\n        rightPanelNode: cc.Node,\r\n        showRightButton: cc.Button,\r\n        showRightLabel: cc.Label,\r\n        throwButton: cc.Button,\r\n    },\r\n\r\n    start()\r\n    {\r\n        this.ButtonLeave.active = false;\r\n        this.ButtonStart.active = false;\r\n        this.InGameButtons.active = false;\r\n        this.onlineList.node.active = true;\r\n        this.chatBox.node.active = false;\r\n        this.seatOccupied = [false, false, false, false];\r\n    },\r\n\r\n    addPlayer(player)\r\n    {\r\n        this.onlineList.addPlayer(player);\r\n    },\r\n\r\n    removePlayer(player)\r\n    {\r\n        this.onlineList.removePlayer(player);\r\n    },\r\n\r\n    requestSeat(sender, seat)\r\n    {\r\n        console.log(\"request Seat\");\r\n        GSMgr.instance.requestSeat(parseInt(seat));\r\n    },\r\n\r\n    requestLeaveSeat()\r\n    {\r\n        GSMgr.instance.leaveSeat(GameMgr.instance.getMySeat());\r\n    },\r\n\r\n    playerEnterSeat(playerInfo, seat)\r\n    {\r\n        this.seatOccupied[seat] = true;\r\n        this.SeatMgr.onPlayerEnter(playerInfo, seat);\r\n        if (GameMgr.instance.IsMyId(playerInfo.id))\r\n        {\r\n            this.ButtonLeave.active = true;\r\n        }\r\n    },\r\n\r\n    playerLeaveSeat(seat)\r\n    {\r\n        if (GameMgr.instance.getMySeat() == seat)\r\n        {\r\n            this.ButtonLeave.active = false;\r\n            this.enableStartButton(false);\r\n        }\r\n        this.SeatMgr.onPlayerLeave(seat);\r\n    },\r\n\r\n    setHost(playerId)\r\n    {\r\n        this.SeatMgr.setHost(playerId);\r\n    },\r\n\r\n    enableStartButton(enable) {\r\n        this.ButtonStart.active = enable;\r\n    },\r\n\r\n    chatBoxClick()\r\n    {\r\n        this.onlineList.node.active = false;\r\n        this.chatBox.node.active = true;\r\n    },\r\n\r\n    onlineClick()\r\n    {\r\n        this.onlineList.node.active = true;\r\n        this.chatBox.node.active = false;\r\n    },\r\n\r\n    onStartGameClick()\r\n    {\r\n        GSMgr.instance.startGame();\r\n        this.ButtonStart.active = false;\r\n    },\r\n\r\n    onCardsReceived(cards)\r\n    {\r\n        console.log(\"on Card Receive \" + cards);\r\n        for (var i=0; i<cards.length; i++)\r\n        {\r\n            let card = ObjectPool.instance.getCard(cards[i]);\r\n                card.setParent(this.myCardNode);\r\n        }\r\n        this.InGameButtons.active = true;\r\n    },\r\n\r\n    onShowRightMenuClick()\r\n    {\r\n        var position =  this.showRightButton.node.getPosition();\r\n        if(this.rightPanelNode.active == true) {\r\n            this.rightPanelNode.active = false;\r\n            this.showRightLabel.string = \"<<\";\r\n            return;\r\n        }\r\n        this.rightPanelNode.active = true;\r\n        this.showRightLabel.string = \">>\";\r\n    },\r\n\r\n    enableThrowButton(enable)\r\n    {\r\n        this.throwButton.node.active = enable;\r\n    },\r\n\r\n    throwButtonClick()\r\n    {\r\n        GSMgr.instance.throwCards(GameMgr.instance.getSetCards());\r\n    }\r\n});\r\n"]}