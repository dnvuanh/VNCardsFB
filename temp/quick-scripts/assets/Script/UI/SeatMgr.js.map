{"version":3,"sources":["SeatMgr.js"],"names":["cc","Class","extends","Component","start","seats","GameMgr","instance","getCurrentSeats","seat","playerId","playerInfo","getPlayer","onPlayerEnter","host","getHost","setHost","node","children","length","seatDisplay","getComponent","display","onPlayerLeave","remove","i","getPlayerId"],"mappings":";;;;;;AAAAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAILC,SAJK,mBAKL;AACI,YAAIC,QAAQC,QAAQC,QAAR,CAAiBC,eAAjB,EAAZ;AACA,aAAK,IAAIC,IAAT,IAAiBJ,KAAjB,EACA;AACI,gBAAIK,WAAWL,MAAMI,IAAN,CAAf;AACA,gBAAIC,QAAJ,EACA;AACI,oBAAIC,aAAaL,QAAQC,QAAR,CAAiBK,SAAjB,CAA2BF,QAA3B,CAAjB;AACA,qBAAKG,aAAL,CAAmBF,UAAnB,EAA+BF,IAA/B;AACH;AACJ;AACD,YAAIK,OAAOR,QAAQC,QAAR,CAAiBQ,OAAjB,EAAX;AACA,YAAID,IAAJ,EACI,KAAKE,OAAL,CAAaF,IAAb;AACP,KAnBI;AAqBLD,iBArBK,yBAqBSF,UArBT,EAqBqBF,IArBrB,EAsBL;AACI,YAAIA,OAAO,KAAKQ,IAAL,CAAUC,QAAV,CAAmBC,MAA9B,EACA;AACI,gBAAIC,cAAc,KAAKH,IAAL,CAAUC,QAAV,CAAmBT,IAAnB,EAAyBY,YAAzB,CAAsC,aAAtC,CAAlB;AACID,wBAAYE,OAAZ,CAAoBX,UAApB;AACP;AACJ,KA5BI;AA8BLY,iBA9BK,yBA8BSd,IA9BT,EA+BL;AACI,YAAIA,OAAO,KAAKQ,IAAL,CAAUC,QAAV,CAAmBC,MAA9B,EACA;AACI,gBAAIC,cAAc,KAAKH,IAAL,CAAUC,QAAV,CAAmBT,IAAnB,EAAyBY,YAAzB,CAAsC,aAAtC,CAAlB;AACID,wBAAYI,MAAZ;AACP;AACJ,KArCI;AAuCLR,WAvCK,mBAuCGN,QAvCH,EAwCL;AACI,aAAK,IAAIe,IAAE,CAAX,EAAcA,IAAE,KAAKR,IAAL,CAAUC,QAAV,CAAmBC,MAAnC,EAA2CM,GAA3C,EACA;AACI,gBAAIL,cAAc,KAAKH,IAAL,CAAUC,QAAV,CAAmBO,CAAnB,EAAsBJ,YAAtB,CAAmC,aAAnC,CAAlB;AACA,gBAAID,eAAeA,YAAYM,WAAZ,MAA6BhB,QAAhD,EACA;AACIU,4BAAYJ,OAAZ,CAAoB,IAApB;AACH,aAHD,MAKA;AACII,+BAAeA,YAAYJ,OAAZ,CAAoB,KAApB,CAAf;AACH;AACJ;AACJ;AArDI,CAAT","file":"SeatMgr.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\Script\\UI","sourcesContent":["cc.Class({\r\n    extends: cc.Component,\r\n\r\n    \r\n    start()\r\n    {\r\n        let seats = GameMgr.instance.getCurrentSeats();\r\n        for (var seat in seats)\r\n        {\r\n            let playerId = seats[seat];\r\n            if (playerId)\r\n            {\r\n                let playerInfo = GameMgr.instance.getPlayer(playerId);\r\n                this.onPlayerEnter(playerInfo, seat);\r\n            }\r\n        }\r\n        let host = GameMgr.instance.getHost();\r\n        if (host)\r\n            this.setHost(host);\r\n    },\r\n\r\n    onPlayerEnter(playerInfo, seat)\r\n    {\r\n        if (seat < this.node.children.length)\r\n        {\r\n            var seatDisplay = this.node.children[seat].getComponent(\"SeatDisplay\");\r\n                seatDisplay.display(playerInfo);\r\n        }\r\n    },\r\n\r\n    onPlayerLeave(seat)\r\n    {\r\n        if (seat < this.node.children.length)\r\n        {\r\n            var seatDisplay = this.node.children[seat].getComponent(\"SeatDisplay\");\r\n                seatDisplay.remove();\r\n        }\r\n    },\r\n\r\n    setHost(playerId)\r\n    {\r\n        for (var i=0; i<this.node.children.length; i++)\r\n        {\r\n            var seatDisplay = this.node.children[i].getComponent(\"SeatDisplay\");\r\n            if (seatDisplay && seatDisplay.getPlayerId() == playerId)\r\n            {\r\n                seatDisplay.setHost(true);\r\n            }\r\n            else\r\n            {\r\n                seatDisplay && seatDisplay.setHost(false);\r\n            }\r\n        }\r\n    }\r\n});\r\n"]}